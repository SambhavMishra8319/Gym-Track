iam making workout planner    so in src folder  there is components  data firebase layouts pages services styles utils    foldweers   now in compnenrs folder there are stats prcharts navbar logger history goalsection goalsettingmodel goalmodel  footer charts analytics addexecise.jsx files   now in data there is defaulttemplates.js   now in firebase folder there are auth config exercise goals templates.js files   in layouts  mainlayout.jsx    in pages folder  there are addworkout analyticspage dashboard history home profile prpage templats.jsx files   now in services   there is workoutservise.js in utils there is formateData.js     and other than these in src there are app.jsx firebase.js index,css  main.jsx      now i will give you all files       addexercise.jsx import React, { useState } from 'react'

export default function AddExercise({ onRemove, onChange, index, exercise }) {
  // exercise: { name, sets: [{reps, weight}, ...] }
  const handleName = (e) => {
    onChange(index, { ...exercise, name: e.target.value })
  }

  const handleSetChange = (setIdx, field, value) => {
    const newSets = exercise.sets.map((s, i) => i === setIdx ? { ...s, [field]: value } : s)
    onChange(index, { ...exercise, sets: newSets })
  }

  const addSet = () => {
    onChange(index, { ...exercise, sets: [...exercise.sets, { reps: '', weight: '' }] })
  }

  const removeSet = (setIdx) => {
    const newSets = exercise.sets.filter((_, i) => i !== setIdx)
    onChange(index, { ...exercise, sets: newSets })
  }

  return (
    <div className="border p-3 rounded bg-white">
      <div className="flex justify-between items-center mb-2">
        <input value={exercise.name} onChange={handleName} placeholder="Exercise name" className="p-2 border rounded w-full" />
        <button onClick={() => onRemove(index)} className="ml-2 text-red-500">Remove</button>
      </div>

      <div className="space-y-2">
        {exercise.sets.map((s, si) => (
          <div key={si} className="flex items-center gap-2">
            <div className="font-medium w-12">Set {si+1}</div>
            <input value={s.reps} onChange={(e)=>handleSetChange(si,'reps',e.target.value)} placeholder="Reps" className="p-2 border rounded w-24" />
            <input value={s.weight} onChange={(e)=>handleSetChange(si,'weight',e.target.value)} placeholder="Weight" className="p-2 border rounded w-24" />
            <button onClick={()=>removeSet(si)} className="text-red-500 px-2">‚úñ</button>
          </div>
        ))}
      </div>

      <div className="mt-3">
        <button onClick={addSet} className="px-3 py-1 bg-gray-100 rounded">+ Add Set</button>
      </div>
    </div>
  )
}     analytics.jsx  import React, { useEffect, useState } from 'react'
import { workoutsCollection } from '../firebase/config'
import { query, orderBy, getDocs } from 'firebase/firestore'

export default function Analytics({ user }) {
  const [summary, setSummary] = useState({ totalWorkouts:0, exercises: {} })
  const [loading, setLoading] = useState(true)

  useEffect(()=> {
    async function calc(){
      if(!user) { setLoading(false); return }
      setLoading(true)
      try{
        const q = query(workoutsCollection(user.uid), orderBy('createdAt','desc'))
        const snap = await getDocs(q)
        const workouts = snap.docs.map(d => d.data())
        const exMap = {}
        workouts.forEach(w=>{
          (w.exercises || []).forEach(ex=>{
            const name = (ex.name || 'unnamed').toLowerCase()
            if(!exMap[name]) exMap[name] = { sessions:0, totalReps:0, totalWeight:0 }
            exMap[name].sessions += 1
            ;(ex.sets || []).forEach(s=>{
              const reps = Number(s.reps) || 0
              const weight = Number(s.weight) || 0
              exMap[name].totalReps += reps
              exMap[name].totalWeight += reps * weight
            })
          })
        })
        setSummary({ totalWorkouts: workouts.length, exercises: exMap })
      }catch(e){ console.error(e) }
      setLoading(false)
    }
    calc()
  }, [user])

  if(!user) return <div>Please sign in to view analytics.</div>

  return (
    <div>
      <h2 className="text-xl font-semibold mb-4">Analytics</h2>
      {loading && <p>Loading...</p>}
      {!loading && (
        <div>
          <div className="mb-4">Total workouts: <strong>{summary.totalWorkouts}</strong></div>
          <h3 className="font-medium mb-2">Top Exercises</h3>
          {Object.keys(summary.exercises).length === 0 && <div>No data available yet.</div>}
          <div className="space-y-2">
            {Object.entries(summary.exercises).sort((a,b)=>b[1].sessions - a[1].sessions).slice(0,10).map(([name,data])=>(
              <div key={name} className="border p-2 rounded text-sm">
                <div className="capitalize font-medium">{name}</div>
                <div>{data.sessions} sessions</div>
                <div>Total reps: {data.totalReps}</div>
                <div>Total volume: {data.totalWeight} kg</div>
              </div>
            ))}
          </div>
        </div>
      )}
    </div>
  )
}   charts.jsx import React, { useEffect, useState } from "react";
import { getWorkouts } from "../firebase/exercises";
import { LineChart, Line, XAxis, YAxis, Tooltip, Legend, CartesianGrid } from "recharts";

export default function Charts({ user }) {
  const [workouts, setWorkouts] = useState([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    if (!user) return;

    const fetchWorkouts = async () => {
      try {
        const data = await getWorkouts(user.uid);
        setWorkouts(data);
      } catch (err) {
        console.error("Error fetching workouts:", err);
      } finally {
        setLoading(false);
      }
    };

    fetchWorkouts();
  }, [user]);

  if (!user) return <p>Please sign in to see your charts.</p>;
  if (loading) return <p>Loading charts...</p>;
  if (!workouts.length) return <p>No workouts found.</p>;

  // Prepare chart data per exercise
  const chartData = {};
  workouts.forEach((workout) => {
    workout.exercises.forEach((ex) => {
      if (!chartData[ex.name]) chartData[ex.name] = [];
      ex.sets.forEach((set, idx) => {
        chartData[ex.name].push({
          set: idx + 1,
          weight: Number(set.weight) || 0,
          reps: Number(set.reps) || 0,
        });
      });
    });
  });

  return (
    <div className="space-y-6">
      {Object.keys(chartData).map((exName) => (
        <div key={exName} className="bg-white p-4 rounded shadow">
          <h3 className="font-semibold mb-2">{exName} Progress</h3>
          <LineChart
            width={600}
            height={250}
            data={chartData[exName]}
            margin={{ top: 5, right: 20, bottom: 5, left: 0 }}
          >
            <XAxis dataKey="set" label={{ value: "Set", position: "insideBottomRight", offset: -5 }} />
            <YAxis label={{ value: "Weight (kg)", angle: -90, position: "insideLeft" }} />
            <Tooltip />
            <Legend />
            <CartesianGrid stroke="#ccc" strokeDasharray="5 5" />
            <Line type="monotone" dataKey="weight" stroke="#3b82f6" />
          </LineChart>
        </div>
      ))}
    </div>
  );
} footer.jsx 
 import React from "react";
import { Link, useLocation } from "react-router-dom";
import { Home, BarChart2, PlusCircle, User, FolderOpen } from "lucide-react";

export default function Footer() {
  const location = useLocation();

  const navItems = [
    { to: "/", icon: <Home size={26} />, label: "Home" },
    { to: "/analytics", icon: <BarChart2 size={26} />, label: "Stats" },
    { to: "/add", icon: <PlusCircle size={32} />, label: "Add" },
    { to: "/templates", icon: <FolderOpen size={26} />, label: "Templates" },
    { to: "/profile", icon: <User size={26} />, label: "Profile" },
  ];

  return (
    <div className="fixed bottom-0 left-0 w-full bg-white shadow-[0_-2px_10px_rgba(0,0,0,0.08)] h-20 flex items-center justify-around z-30 md:hidden">
      {navItems.map((item) => (
        <Link
          key={item.to}
          to={item.to}
          className={`flex flex-col items-center gap-1 text-sm ${
            location.pathname === item.to
              ? "text-blue-600 font-semibold"
              : "text-gray-500"
          }`}
        >
          {item.icon}
          <span>{item.label}</span>
        </Link>
      ))}
    </div>
  );
}
   goalmodel.jsx 
import React, { useState } from "react";
import { addGoal } from "../firebase/goals";

export default function GoalModal({ user, onClose }) {
  const [title, setTitle] = useState("");
  const [description, setDescription] = useState("");
  const [targetDate, setTargetDate] = useState("");

  const saveGoal = async () => {
    if (!title.trim()) return alert("Goal title required");

    await addGoal(user.uid, {
      title,
      description,
      targetDate,
    });

    onClose(); // close and refresh
  };

  return (
    <div className="fixed inset-0 bg-black/40 flex items-center justify-center z-50">
      <div className="bg-white w-96 p-6 rounded-xl shadow-lg">
        <h2 className="text-xl font-semibold mb-4">Add New Goal</h2>

        <div className="space-y-3">
          <div>
            <label className="text-sm font-medium">Goal Title</label>
            <input
              type="text"
              className="w-full p-2 border rounded mt-1"
              placeholder="e.g. Lose 5kg"
              value={title}
              onChange={(e) => setTitle(e.target.value)}
            />
          </div>

          <div>
            <label className="text-sm font-medium">Description</label>
            <textarea
              className="w-full p-2 border rounded mt-1"
              placeholder="Short description..."
              value={description}
              onChange={(e) => setDescription(e.target.value)}
            ></textarea>
          </div>

          <div>
            <label className="text-sm font-medium">Target Date</label>
            <input
              type="date"
              className="w-full p-2 border rounded mt-1"
              value={targetDate}
              onChange={(e) => setTargetDate(e.target.value)}
            />
          </div>
        </div>

        <div className="flex justify-end gap-3 mt-5">
          <button
            className="px-3 py-2 bg-gray-300 rounded-md"
            onClick={onClose}
          >
            Cancel
          </button>

          <button
            className="px-4 py-2 bg-green-600 text-white rounded-md"
            onClick={saveGoal}
          >
            Save Goal
          </button>
        </div>
      </div>
    </div>
  );
}    goalsettingsmodel.jsx import React, { useState, useEffect } from "react";
import { X } from "lucide-react";

export default function GoalSettingsModal({ open, onClose, onSave }) {
  const [goals, setGoals] = useState({
    sets: 10,
    calories: 300,
    water: 2000,
    minutes: 45,
  });

  useEffect(() => {
    const saved = JSON.parse(localStorage.getItem("dailyGoals"));
    if (saved) setGoals(saved);
  }, []);

  const handleChange = (key, value) => {
    setGoals((prev) => ({ ...prev, [key]: Number(value) }));
  };

  const saveGoals = () => {
    localStorage.setItem("dailyGoals", JSON.stringify(goals));
    onSave(goals);
    onClose();
  };

  if (!open) return null;

  return (
    <div className="fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50">
      <div className="bg-white rounded-2xl shadow-xl p-6 w-96 border border-gray-200 relative">

        {/* CLOSE BUTTON */}
        <button className="absolute top-4 right-4" onClick={onClose}>
          <X size={22} className="text-gray-600 hover:text-black" />
        </button>

        <h2 className="text-xl font-semibold mb-4 text-gray-800">Set Your Daily Goals</h2>

        {/* INPUT GRID */}
        <div className="grid grid-cols-2 gap-4">
          <GoalInput label="Sets" value={goals.sets} onChange={(v) => handleChange("sets", v)} />
          <GoalInput label="Calories" value={goals.calories} onChange={(v) => handleChange("calories", v)} />
          <GoalInput label="Water (ml)" value={goals.water} onChange={(v) => handleChange("water", v)} />
          <GoalInput label="Minutes" value={goals.minutes} onChange={(v) => handleChange("minutes", v)} />
        </div>

        <button
          onClick={saveGoals}
          className="w-full mt-6 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition shadow"
        >
          Save Goals
        </button>
      </div>
    </div>
  );
}

function GoalInput({ label, value, onChange }) {
  return (
    <div>
      <label className="text-sm text-gray-600">{label}</label>
      <input
        type="number"
        value={value}
        className="w-full mt-1 px-3 py-2 border rounded-xl bg-gray-50 outline-none shadow-inner"
        onChange={(e) => onChange(e.target.value)}
      />
    </div>
  );
}    goalssection.jsx import React from "react";

export default function GoalsSection({ goals, onAddGoal }) {
  return (
    <div className="p-4 bg-white rounded-lg shadow border">
      <div className="flex justify-between items-center mb-3">
        <h2 className="text-lg font-semibold">Your Goals</h2>
        <button
          onClick={onAddGoal}
          className="px-3 py-1 bg-green-600 text-white rounded-md"
        >
          Add Goal
        </button>
      </div>

      {goals.length === 0 && (
        <p className="text-gray-500 text-sm">You have no goals yet.</p>
      )}

      <div className="space-y-3">
        {goals.map((g) => (
          <div
            key={g.id}
            className="p-3 border rounded-md bg-gray-50 shadow-sm"
          >
            <div className="font-medium">{g.title}</div>
            <div className="text-sm text-gray-600">{g.description}</div>
            <div className="text-xs text-gray-400 mt-1">
              Target: {g.targetDate}
            </div>
          </div>
        ))}
      </div>
    </div>
  );
}   history.jsx 
import React, { useEffect, useState } from "react";
import { getWorkouts, deleteWorkout } from "../firebase/exercises";
import AddWorkout from "../pages/AddWorkout";

export default function History({ user }) {
  const [entries, setEntries] = useState([]);
  const [loading, setLoading] = useState(true);
  const [editingWorkout, setEditingWorkout] = useState(null);

  useEffect(() => {
    async function load() {
      setLoading(true);
      if (!user) {
        setEntries([]);
        setLoading(false);
        return;
      }
      const data = await getWorkouts(user.uid);
      setEntries(data.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt)));
      setLoading(false);
    }
    load();
  }, [user]);

  const handleDelete = async (id) => {
    if (!window.confirm("Are you sure you want to delete this workout?")) return;
    try {
      await deleteWorkout(id);
      setEntries(entries.filter(e => e.id !== id));
    } catch (e) {
      console.error(e);
      alert("Failed to delete workout");
    }
  };

  return (
    <div>
      <h2 className="text-xl font-semibold mb-4">Workout History</h2>
      {loading && <p>Loading...</p>}
      {!loading && entries.length === 0 && <p>No workouts logged yet.</p>}

      <div className="space-y-4">
        {entries.map(entry => (
          <div key={entry.id} className="border p-3 rounded shadow-sm">
            <div className="flex justify-between items-center mb-2">
              <div className="font-medium">{entry.date}</div>
              <div className="flex gap-2">
                <button
                  className="text-blue-600 text-sm"
                  onClick={() => setEditingWorkout(entry)}
                >
                  Edit
                </button>
                <button
                  className="text-red-600 text-sm"
                  onClick={() => handleDelete(entry.id)}
                >
                  Delete
                </button>
              </div>
            </div>

            <div className="space-y-2">
              {entry.exercises.map((ex, i) => (
                <div key={i} className="border p-2 rounded">
                  <div className="font-medium mb-1">{ex.name || "Exercise"}</div>
                  {ex.sets.map((set, j) => (
                    <div key={j} className="flex gap-4 text-sm">
                      <div>Set {j + 1}: {set.reps} reps @ {set.weight}</div>
                    </div>
                  ))}
                  {ex.notes && <div className="text-xs text-gray-500 mt-1">Notes: {ex.notes}</div>}
                </div>
              ))}
            </div>
          </div>
        ))}
      </div>

      {/* Edit Workout Modal */}
      {editingWorkout && (
        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
          <div className="bg-white p-6 rounded shadow-lg max-w-xl w-full relative">
            <AddWorkout
              existingWorkout={editingWorkout}
              userId={user.uid}
            />
            <button
              className="absolute top-2 right-2 text-red-500 text-lg font-bold"
              onClick={() => setEditingWorkout(null)}
            >
              ‚úï
            </button>
          </div>
        </div>
      )}
    </div>
  );
}  ;ogger.jsx import React, { useState } from 'react'
import { addDoc } from 'firebase/firestore'
import { workoutsCollection } from '../firebase'

const defaultExercise = { name: '', sets: 3, reps: 8, weight: '', notes: '' }

export default function Logger({ userId }){
  const [date, setDate] = useState(new Date().toISOString().slice(0,10))
  const [exercises, setExercises] = useState([ {...defaultExercise} ])
  const [saving, setSaving] = useState(false)
  const [message, setMessage] = useState('')

  function updateExercise(idx, field, value){
    const copy = [...exercises]
    copy[idx][field] = value
    setExercises(copy)
  }

  function addRow(){ setExercises(prev => [...prev, {...defaultExercise}]) }
  function removeRow(i){ setExercises(prev => prev.filter((_,idx)=>idx!==i)) }

  async function save(){
    setSaving(true)
    setMessage('')
    try{
      const payload = { date, exercises, createdAt: new Date().toISOString() }
      await addDoc(workoutsCollection(userId), payload)
      setMessage('Saved ‚úÖ')
      setExercises([ {...defaultExercise} ])
    }catch(e){
      console.error(e)
      setMessage('Error saving')
    }
    setSaving(false)
  }

  return (
    <div>
      <h2 className="text-xl font-semibold mb-4">Log Workout</h2>
      <div className="mb-4">
        <label className="block text-sm">Date</label>
        <input type="date" className="mt-1 p-2 border rounded" value={date} onChange={e=>setDate(e.target.value)} />
      </div>

      <div className="space-y-3 mb-4">
        {exercises.map((ex, idx)=> (
          <div key={idx} className="grid grid-cols-12 gap-2 items-end">
            <div className="col-span-4">
              <label className="text-xs">Exercise</label>
              <input value={ex.name} onChange={e=>updateExercise(idx,'name',e.target.value)} placeholder="e.g. Bench Press" className="w-full p-2 border rounded" />
            </div>
            <div className="col-span-2">
              <label className="text-xs">Sets</label>
              <input type="number" value={ex.sets} onChange={e=>updateExercise(idx,'sets',Number(e.target.value))} className="w-full p-2 border rounded" />
            </div>
            <div className="col-span-2">
              <label className="text-xs">Reps</label>
              <input type="number" value={ex.reps} onChange={e=>updateExercise(idx,'reps',Number(e.target.value))} className="w-full p-2 border rounded" />
            </div>
            <div className="col-span-2">
              <label className="text-xs">Weight</label>
              <input value={ex.weight} onChange={e=>updateExercise(idx,'weight',e.target.value)} placeholder="kg" className="w-full p-2 border rounded" />
            </div>
            <div className="col-span-2">
              <button onClick={()=>removeRow(idx)} className="text-sm text-red-600">Remove</button>
            </div>

            <div className="col-span-12">
              <label className="text-xs">Notes</label>
              <input value={ex.notes} onChange={e=>updateExercise(idx,'notes',e.target.value)} className="w-full p-2 border rounded" />
            </div>
          </div>
        ))}
      </div>

      <div className="flex gap-2">
        <button onClick={addRow} className="px-4 py-2 bg-gray-100 rounded">Add Exercise</button>
        <button onClick={save} disabled={saving} className="px-4 py-2 bg-blue-600 text-white rounded">{saving? 'Saving...' : 'Save Workout'}</button>
      </div>

      {message && <p className="mt-3">{message}</p>}
    </div>
  )
}
    navbar.jsx import React, { useEffect, useState } from "react";
import { Bell, Search, Flame } from "lucide-react";

export default function Navbar({ title = "FitTrack", onTodayClick }) {
  const [streak, setStreak] = useState(0);

  // ----------------------------
  // ‚≠ê DAILY STREAK SYSTEM LOGIC
  // ----------------------------
  useEffect(() => {
    const storedStreak = Number(localStorage.getItem("streak")) || 0;
    const lastOpen = localStorage.getItem("lastOpen");
    const today = new Date().toDateString();

    if (lastOpen === today) {
      // Already opened today ‚Üí keep streak same
      setStreak(storedStreak);
    } else {
      // First open today ‚Üí increase streak
      const newStreak = storedStreak + 1;
      setStreak(newStreak);
      localStorage.setItem("streak", newStreak);
      localStorage.setItem("lastOpen", today);
    }
  }, []);

  return (
    <div
      className="
      w-full fixed top-0 left-0 
      backdrop-blur-xl bg-white/70 
      border-b border-gray-200 
      h-16 flex items-center 
      px-6 z-50 
      shadow-[0_2px_12px_rgba(0,0,0,0.06)]
    "
    >
      {/* LOGO */}
      <div className="flex items-center gap-3">
        <div
          className="
          h-10 w-10 rounded-2xl 
          bg-gradient-to-br from-blue-50 to-blue-100 
          flex items-center justify-center 
          shadow-inner border border-blue-200
        "
        >
          <span className="text-blue-600 font-bold text-lg">FT</span>
        </div>

        <h1 className="text-xl font-semibold text-gray-800 tracking-wide">
          {title}
        </h1>
      </div>

      {/* CENTER SEARCH BAR */}
      <div className="hidden md:flex items-center mx-auto w-1/3">
        <div
          className="
          flex items-center gap-2 
          bg-gray-100/80 backdrop-blur-md 
          border border-gray-200 
          px-3 py-1.5 rounded-xl 
          w-full 
          shadow-inner
        "
        >
          <Search size={18} className="text-gray-500" />
          <input
            type="text"
            placeholder="Search workouts, exercises..."
            className="bg-transparent w-full outline-none text-sm"
          />
        </div>
      </div>

      {/* RIGHT SIDE ICONS */}
      <div className="flex items-center gap-5 ml-auto">
        {/* üî• DAILY STREAK BADGE */}
        <div className="flex items-center gap-2 bg-orange-50 border border-orange-200 px-3 py-1 rounded-xl shadow-sm">
          <Flame size={20} className="text-orange-500" />
          <span className="text-orange-600 font-semibold text-sm">
            {streak}-day streak
          </span>
        </div>

        {/* TODAY BUTTON */}
        <button
          onClick={onTodayClick}
          className="
          hidden md:block 
          px-4 py-1.5 
          rounded-xl 
          bg-gray-100 hover:bg-gray-200 transition 
          text-sm
        "
        >
          Today
        </button>

        {/* NOTIFICATION BELL */}
        <button
          className="
          h-10 w-10 rounded-full 
          bg-gray-100 flex items-center justify-center 
          hover:bg-gray-200 transition
        "
        >
          <Bell size={20} className="text-gray-600" />
        </button>

        {/* PROFILE */}
        <button
          className="
          h-10 w-10 rounded-full 
          bg-gray-100 flex items-center justify-center 
          hover:bg-gray-200 transition
        "
        >
          <img
            src="https://ui-avatars.com/api/?name=Sam&background=E0F2FE&color=0284C7&rounded=true"
            alt="profile"
            className="h-10 w-10 rounded-full"
          />
        </button>
      </div>
    </div>
  );
}
prcharts.jsx import React, { useEffect, useState } from "react";
import { getWorkouts } from "../firebase/exercises";
import { LineChart, Line, XAxis, YAxis, Tooltip, Legend, CartesianGrid } from "recharts";

export default function PRCharts({ user }) {
  const [workouts, setWorkouts] = useState([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    if (!user) return;

    const fetchWorkouts = async () => {
      try {
        const data = await getWorkouts(user.uid);
        setWorkouts(data);
      } catch (err) {
        console.error("Error fetching workouts:", err);
      } finally {
        setLoading(false);
      }
    };

    fetchWorkouts();
  }, [user]);

  if (!user) return <p>Please sign in to see your PR charts.</p>;
  if (loading) return <p>Loading PR charts...</p>;
  if (!workouts.length) return <p>No workouts found.</p>;

  // Prepare PR data: heaviest weight per exercise per date
  const prData = {};
  workouts.forEach((workout) => {
    workout.exercises.forEach((ex) => {
      if (!prData[ex.name]) prData[ex.name] = [];
      const maxWeight = ex.sets.reduce((max, set) => Math.max(max, Number(set.weight) || 0), 0);
      prData[ex.name].push({ date: workout.date, weight: maxWeight });
    });
  });

  return (
    <div className="space-y-6">
      {Object.keys(prData).map((exName) => (
        <div key={exName} className="bg-white p-4 rounded shadow">
          <h3 className="font-semibold mb-2">{exName} Personal Record</h3>
          <LineChart
            width={600}
            height={250}
            data={prData[exName]}
            margin={{ top: 5, right: 20, bottom: 5, left: 0 }}
          >
            <XAxis dataKey="date" label={{ value: "Date", position: "insideBottomRight", offset: -5 }} />
            <YAxis label={{ value: "Weight (kg)", angle: -90, position: "insideLeft" }} />
            <Tooltip />
            <Legend />
            <CartesianGrid stroke="#ccc" strokeDasharray="5 5" />
            <Line type="monotone" dataKey="weight" stroke="#ef4444" />
          </LineChart>
        </div>
      ))}
    </div>
  );
}
   stats.jsx import React from 'react'

export default function Stats({ entries = [] }) {
  const totalWorkouts = entries.length
  let totalSets = 0
  let totalReps = 0
  entries.forEach(e => {
    e.exercises.forEach(ex => {
      ex.sets.forEach(s => {
        totalSets += 1
        totalReps += Number(s.reps) || 0
      })
    })
  })

  return (
    <div className="p-4 bg-white border rounded">
      <div className="font-medium">Stats</div>
      <div className="mt-2 text-sm text-gray-700">Total workouts: {totalWorkouts}</div>
      <div className="text-sm text-gray-700">Total sets logged: {totalSets}</div>
      <div className="text-sm text-gray-700">Total reps logged: {totalReps}</div>
    </div>
  )
}
defaulttemplates.js export const defaultTemplates = [
  {
    name: "Chest + Triceps",
    exercises: [
      { name: "Bench Press", sets: [{ reps: "10", weight: "" }] },
      { name: "Incline Dumbbell Press", sets: [{ reps: "12", weight: "" }] },
      { name: "Chest Fly", sets: [{ reps: "15", weight: "" }] },
      { name: "Tricep Pushdown", sets: [{ reps: "12", weight: "" }] },
      { name: "Overhead Tricep Extension", sets: [{ reps: "12", weight: "" }] },
    ],
  },
  {
    name: "Back + Biceps",
    exercises: [
      { name: "Deadlift", sets: [{ reps: "5", weight: "" }] },
      { name: "Lat Pulldown", sets: [{ reps: "12", weight: "" }] },
      { name: "Seated Row", sets: [{ reps: "12", weight: "" }] },
      { name: "Bicep Curl", sets: [{ reps: "12", weight: "" }] },
      { name: "Hammer Curl", sets: [{ reps: "12", weight: "" }] },
    ],
  },
  {
    name: "Leg Day",
    exercises: [
      { name: "Squat", sets: [{ reps: "5", weight: "" }] },
      { name: "Leg Press", sets: [{ reps: "12", weight: "" }] },
      { name: "Leg Extension", sets: [{ reps: "15", weight: "" }] },
      { name: "Hamstring Curl", sets: [{ reps: "12", weight: "" }] },
      { name: "Calf Raise", sets: [{ reps: "20", weight: "" }] },
    ],
  },
  {
    name: "Shoulders",
    exercises: [
      { name: "Overhead Press", sets: [{ reps: "8", weight: "" }] },
      { name: "Lateral Raise", sets: [{ reps: "15", weight: "" }] },
      { name: "Front Raise", sets: [{ reps: "12", weight: "" }] },
      { name: "Reverse Fly", sets: [{ reps: "12", weight: "" }] },
    ],
  },
];
 auth.js // firebase/auth.js
import { auth, googleProvider } from "./config";
import { signInWithPopup, signOut as fbSignOut, onAuthStateChanged } from "firebase/auth";

export function signInWithGoogle() {
  return signInWithPopup(auth, googleProvider);
}

export function signOut() {
  return fbSignOut(auth);
}

export function onAuthChange(callback) {
  return onAuthStateChanged(auth, callback);
}

export function currentUser() {
  return auth.currentUser;
}    config.js import { initializeApp, getApps, getApp } from "firebase/app";
import { getFirestore, collection } from "firebase/firestore";
import { getAuth, GoogleAuthProvider } from "firebase/auth";

const firebaseConfig = {
  apiKey: "AIzaSyB3SEL01A00iO0SFTt1utqQMCuW9p30GVQ",
  authDomain: "workoutplannar.firebaseapp.com",
  projectId: "workoutplannar",
  storageBucket: "workoutplannar.firebasestorage.app",
  messagingSenderId: "923344644640",
  appId: "1:923344644640:web:d21c2ef570bd2c401daa45",
  measurementId: "G-QV804ZLRLZ"
};

// // Initialize Firebase once
// export const app = initializeApp(firebaseConfig);
// export const analytics = getAnalytics(app);
// export const db = getFirestore(app);

// // Helper to get per-user workouts collection
// export const workoutsCollection = (userId) => collection(db, `users/${userId}/workouts`);
// Initialize Firebase only once
// Only initialize once
const app = getApps().length ? getApp() : initializeApp(firebaseConfig);

export const db = getFirestore(app);
export const auth = getAuth(app);
export const googleProvider = new GoogleAuthProvider();

// Helper to get workouts for a user
export const workoutsCollection = (userId) => collection(db, `users/${userId}/workouts`);

export default app;    exercise.js 
import { workoutsCollection } from './config'
import { addDoc, getDocs, query, orderBy, doc, updateDoc, deleteDoc } from 'firebase/firestore'

// Add a new workout
export async function addWorkout(userId, workoutData) {
  const colRef = workoutsCollection(userId)
  const docRef = await addDoc(colRef, {
    ...workoutData,
    createdAt: new Date().toISOString()
  })
  return docRef.id
}

// Get all workouts for a user
export async function getWorkouts(userId) {
  try {
    const colRef = workoutsCollection(userId)
    const q = query(colRef, orderBy('createdAt', 'desc'))
    const snapshot = await getDocs(q)
    return snapshot.docs.map(d => ({ id: d.id, ...d.data() }))
  } catch (err) {
    console.error('Error fetching workouts:', err)
    return []
  }
}

// Update workout
export async function updateWorkout(workoutId, userId, updatedData) {
  const docRef = doc(workoutsCollection(userId), workoutId)
  await updateDoc(docRef, { ...updatedData, updatedAt: new Date().toISOString() })
}

// Delete workout
export async function deleteWorkout(userId, workoutId) {
  const docRef = doc(workoutsCollection(userId), workoutId)
  await deleteDoc(docRef)
}    

goals.js import {
  collection,
  addDoc,
  getDocs,
  query,
  where,
  serverTimestamp,
} from "firebase/firestore";
import { db } from "../firebase";

export const addGoal = async (uid, goal) => {
  await addDoc(collection(db, "goals"), {
    uid,
    ...goal,
    createdAt: serverTimestamp(),
  });
};

export const getGoals = async (uid) => {
  const q = query(collection(db, "goals"), where("uid", "==", uid));
  const snap = await getDocs(q);

  return snap.docs.map((d) => ({ id: d.id, ...d.data() }));
};   tmeplates.js import { addDoc, getDocs, doc, deleteDoc, collection } from "firebase/firestore";
import { db } from "./config";

// Get collection reference
function templatesCollection(userId) {
  return collection(db, "users", userId, "templates");
}

// Add a template
export async function addTemplate(userId, template) {
  return await addDoc(templatesCollection(userId), template);
}

// Get all templates
export async function getTemplates(userId) {
  const snap = await getDocs(templatesCollection(userId));
  return snap.docs.map((d) => ({ id: d.id, ...d.data() }));
}

// Delete template
export async function deleteTemplate(userId, templateId) {
  const ref = doc(db, "users", userId, "templates", templateId);
  await deleteDoc(ref);
}
  mainlayout.js import Navbar from "../components/Navbar";

// import Footer from "..components/Footer";
import Footer from "../components/Footer";

import React, { useState } from "react";
import { Link, useLocation } from "react-router-dom";
import { HiOutlineMenu, HiOutlineX } from "react-icons/hi"; // Works fine

export default function MainLayout({ children }) {
  const location = useLocation();
  const [open, setOpen] = useState(false);

  const isActive = (path) => location.pathname === path;

  return (
    <div className="flex h-screen bg-gray-100">

      {/* MOBILE TOP BAR */}
      <div className="md:hidden fixed top-0 left-0 w-full bg-white shadow p-4 flex justify-between items-center z-50">
        <h1 className="text-2xl font-bold text-blue-600">FitTrack</h1>
        <button onClick={() => setOpen(!open)}>
          {open ? <HiOutlineX size={30} /> : <HiOutlineMenu size={30} />}
        </button>
      </div>

      {/* SIDEBAR */}
      <div
        className={`
          fixed md:static top-0 left-0 h-full bg-white shadow-lg p-5 flex flex-col gap-5 transform z-40
          transition-transform duration-300 ease-in-out
          w-64 
          ${open ? "translate-x-0" : "-translate-x-full md:translate-x-0"}
        `}
      >
        <h1 className="text-2xl font-bold text-blue-600 hidden md:block">FitTrack</h1>

        <nav className="flex flex-col gap-3 mt-6 text-lg">
          
          <Link className={`p-2 rounded hover:bg-gray-200 ${isActive("/") ? "bg-blue-500 text-white shadow" : ""}`} to="/" onClick={() => setOpen(false)}>üè† Dashboard</Link>

          <Link className={`p-2 rounded hover:bg-gray-200 ${isActive("/add") ? "bg-blue-500 text-white shadow" : ""}`} to="/add" onClick={() => setOpen(false)}>‚ûï Add Workout</Link>

          <Link className={`p-2 rounded hover:bg-gray-200 ${isActive("/history") ? "bg-blue-500 text-white shadow" : ""}`} to="/history" onClick={() => setOpen(false)}>üìú History</Link>

          <Link className={`p-2 rounded hover:bg-gray-200 ${isActive("/templates") ? "bg-blue-500 text-white shadow" : ""}`} to="/templates" onClick={() => setOpen(false)}>üìÅ Templates</Link>

          <Link className={`p-2 rounded hover:bg-gray-200 ${isActive("/pr") ? "bg-blue-500 text-white shadow" : ""}`} to="/pr" onClick={() => setOpen(false)}>üèÜ PR Charts</Link>

          <Link className={`p-2 rounded hover:bg-gray-200 ${isActive("/analytics") ? "bg-blue-500 text-white shadow" : ""}`} to="/analytics" onClick={() => setOpen(false)}>üìä Analytics</Link>

          <Link className={`p-2 rounded hover:bg-gray-200 ${isActive("/profile") ? "bg-blue-500 text-white shadow" : ""}`} to="/profile" onClick={() => setOpen(false)}>üë§ Profile</Link>

        </nav>
      </div>

      {/* MAIN CONTENT */}
      <div className="flex-1 p-8 overflow-y-auto mt-16 md:mt-0">
        <Navbar title="FitTrack" />
        {children}
         <Footer />
      </div>
    </div>
  );
}
addworkout.jsx import React, { useState, useEffect } from "react";

// 35import React, { useState } from "react";
import { addWorkout, updateWorkout } from "../firebase/exercises";
import { useLocation } from "react-router-dom";

export default function AddWorkout({ user, existingWorkout = null, onClose = null }) {
  const defaultExercise = { name: "", sets: [{ reps: "", weight: "" }], notes: "" };
  const [date, setDate] = useState(existingWorkout?.date || new Date().toISOString().slice(0, 10));
  const [exercises, setExercises] = useState(existingWorkout?.exercises || [defaultExercise]);
  const [saving, setSaving] = useState(false);

  const updateExerciseField = (exIdx, setIdx, field, value) => {
    const copy = [...exercises];
    copy[exIdx].sets[setIdx][field] = field === "reps" ? Number(value) : value;
    setExercises(copy);
  };

  const addExercise = () => setExercises([...exercises, { ...defaultExercise }]);
  const removeExercise = (idx) => setExercises(exercises.filter((_, i) => i !== idx));
  const addSet = (exIdx) => {
    const copy = [...exercises];
    copy[exIdx].sets.push({ reps: "", weight: "" });
    setExercises(copy);
  };
  const removeSet = (exIdx, setIdx) => {
    const copy = [...exercises];
    copy[exIdx].sets.splice(setIdx, 1);
    setExercises(copy);
  };

  const handleSave = async () => {
    if (!user) return alert("Sign in to save workouts");
    setSaving(true);
    try {
      const payload = { date, exercises, createdAt: new Date().toISOString() };
      if (existingWorkout) {
        await updateWorkout(existingWorkout.id, user.uid, payload);
        alert("Workout updated ‚úÖ");
      } else {
        await addWorkout(user.uid, payload);
        alert("Workout saved ‚úÖ");
      }
      setExercises([defaultExercise]);
      if (onClose) onClose();
    } catch (e) {
      console.error(e);
      alert("Error saving workout");
    }
    setSaving(false);
  };
const location = useLocation();
const template = location.state?.template;

useEffect(() => {
  if (template) {
    setExercises(template.exercises);
  }
}, [template]);

  return (
    <div>
      <h2 className="text-xl font-semibold mb-4">{existingWorkout ? "Edit Workout" : "Add Workout"}</h2>
      <div className="mb-4">
        <label className="block text-sm">Date</label>
        <input type="date" value={date} onChange={(e) => setDate(e.target.value)} className="p-2 border rounded mt-1" />
      </div>

      <div className="space-y-4">
        {exercises.map((ex, exIdx) => (
          <div key={exIdx} className="border p-3 rounded space-y-2">
            <div className="flex gap-2 items-end">
              <div className="flex-1">
                <label className="text-xs">Exercise</label>
                <input
                  value={ex.name}
                  onChange={(e) => {
                    const copy = [...exercises];
                    copy[exIdx].name = e.target.value;
                    setExercises(copy);
                  }}
                  className="w-full p-2 border rounded"
                  placeholder="Bench Press"
                />
              </div>
              <button className="text-red-600 text-sm" onClick={() => removeExercise(exIdx)}>Remove Exercise</button>
            </div>

            {ex.sets.map((set, setIdx) => (
              <div key={setIdx} className="flex gap-4 items-end">
                <div>
                  <label className="text-xs">Reps</label>
                  <input type="number" value={set.reps} onChange={(e) => updateExerciseField(exIdx, setIdx, "reps", e.target.value)} className="p-2 border rounded w-16" />
                </div>
                <div>
                  <label className="text-xs">Weight</label>
                  <input value={set.weight} onChange={(e) => updateExerciseField(exIdx, setIdx, "weight", e.target.value)} placeholder="kg" className="p-2 border rounded w-16" />
                </div>
                <button className="text-red-500 text-sm" onClick={() => removeSet(exIdx, setIdx)}>Remove Set</button>
              </div>
            ))}
            <button onClick={() => addSet(exIdx)} className="px-2 py-1 bg-gray-100 rounded text-sm">Add Set</button>

            <div>
              <label className="text-xs">Notes</label>
              <input value={ex.notes} onChange={(e) => {
                const copy = [...exercises];
                copy[exIdx].notes = e.target.value;
                setExercises(copy);
              }} className="w-full p-2 border rounded" />
            </div>
          </div>
        ))}
      </div>

      <div className="flex gap-2 mt-4">
        <button onClick={addExercise} className="px-4 py-2 bg-gray-100 rounded">Add Exercise</button>
        <button onClick={handleSave} disabled={saving} className="px-4 py-2 bg-blue-600 text-white rounded">
          {saving ? "Saving..." : existingWorkout ? "Update Workout" : "Save Workout"}
        </button>
      </div>
    </div>
  );
}
  analyticspge.jsx import React from "react";
import Charts from "../components/Charts";

export default function AnalyticsPage({ user }) {
  return (
    <div className="p-8 overflow-y-auto">
      <h2 className="text-3xl font-semibold mb-6">Analytics Dashboard</h2>

      {/* Charts Section */}
      <div className="bg-white p-6 rounded-lg shadow">
        <Charts user={user} />
      </div>
    </div>
  );
}
dashboard.jsx import React, { useState } from "react";
import GoalsSection from "../components/GoalsSection";
import GoalModal from "../components/GoalModal"; // your modal component

export default function Dashboard() {
  const [goals, setGoals] = useState([]);
  const [openModal, setOpenModal] = useState(false);

  const addGoal = (goal) => {
    setGoals([...goals, goal]);
  };

  return (
    <>
      <GoalsSection
        goals={goals}
        onAddGoal={() => setOpenModal(true)}
      />

      {openModal && (
        <GoalModal
          onClose={() => setOpenModal(false)}
          onSave={(goal) => {
            addGoal(goal);
            setOpenModal(false);
          }}
        />
      )}
    </>
  );
}
history.jsx import React, { useEffect, useState } from "react";
import AddWorkout from "./AddWorkout";
import { getWorkouts, deleteWorkout } from "../firebase/exercises";

export default function History({ user }) {
  const [entries, setEntries] = useState([]);
  const [loading,setLoading]=useState(true);
  const [editingWorkout,setEditingWorkout]=useState(null);

  useEffect(()=>{
    async function load(){
      if(!user) return;
      setLoading(true);
      const data=await getWorkouts(user.uid);
      setEntries(data);
      setLoading(false);
    }
    load();
  },[user]);

  const handleDelete=async(id)=>{
    if(!window.confirm("Delete this workout?")) return;
    await deleteWorkout(user.uid, id);
    setEntries(entries.filter(e=>e.id!==id));
  }

  return (
    <div>
      <h2 className="text-xl font-semibold mb-4">Workout History</h2>
      {loading && <p>Loading...</p>}
      {!loading && entries.length===0 && <p>No workouts logged yet.</p>}
      <div className="space-y-4">
        {entries.map(entry=>(
          <div key={entry.id} className="border p-3 rounded shadow-sm">
            <div className="flex justify-between items-center mb-2">
              <div>{entry.date}</div>
              <div className="flex gap-2">
                <button onClick={()=>setEditingWorkout(entry)} className="text-blue-600 text-sm">Edit</button>
                <button onClick={()=>handleDelete(entry.id)} className="text-red-600 text-sm">Delete</button>
              </div>
            </div>
            <div className="space-y-2">
              {entry.exercises.map((ex,i)=>(
                <div key={i} className="border p-2 rounded">
                  <div className="font-medium">{ex.name}</div>
                  {ex.sets.map((s,j)=>(
                    <div key={j} className="text-sm">Set {j+1}: {s.reps} reps @ {s.weight} kg</div>
                  ))}
                  {ex.notes && <div className="text-xs text-gray-500">Notes: {ex.notes}</div>}
                </div>
              ))}
            </div>
          </div>
        ))}
      </div>

      {editingWorkout && (
        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
          <div className="bg-white p-6 rounded shadow-lg max-w-xl w-full relative">
            <AddWorkout user={user} existingWorkout={editingWorkout} onClose={()=>setEditingWorkout(null)}/>
            <button onClick={()=>setEditingWorkout(null)} className="absolute top-2 right-2 text-red-500 text-lg font-bold">‚úï</button>
          </div>
        </div>
      )}
    </div>
  );
}
home.jsx import React, { useEffect, useState } from "react";
import Stats from "../components/Stats";
import AddWorkout from "./AddWorkout";
import GoalsSection from "../components/GoalsSection";
import GoalModal from "../components/GoalModal";

import { getWorkouts } from "../firebase/exercises";
import { getGoals } from "../firebase/goals";  // <-- You'll create this file

export default function Home({ user }) {
  const [entries, setEntries] = useState([]);
  const [goals, setGoals] = useState([]);

  const [addingWorkout, setAddingWorkout] = useState(false);
  const [addingGoal, setAddingGoal] = useState(false);

  // LOAD WORKOUTS
  const loadWorkouts = async () => {
    if (!user) return setEntries([]);
    const data = await getWorkouts(user.uid);
    setEntries(data);
  };

  // LOAD GOALS
  const loadGoals = async () => {
    if (!user) return setGoals([]);
    const data = await getGoals(user.uid);
    setGoals(data);
  };

  useEffect(() => {
    loadWorkouts();
    loadGoals();
  }, [user]);

  return (
    <div className="grid grid-cols-3 gap-6">
      {/* LEFT SECTION (2 columns): Workouts */}
      <div className="col-span-2 space-y-4">
        {/* HEADER */}
        <div className="flex justify-between items-center mb-4">
          <h2 className="text-xl font-semibold">Recent Workouts</h2>

          <button
            onClick={() => setAddingWorkout(true)}
            className="px-3 py-1 bg-blue-600 text-white rounded-md"
          >
            Add Workout
          </button>
        </div>

        {/* ADD WORKOUT MODAL */}
        {addingWorkout && (
          <div className="border p-4 rounded bg-white mb-4">
            <AddWorkout
              user={user}
              onClose={() => {
                setAddingWorkout(false);
                loadWorkouts();
              }}
            />
          </div>
        )}

        {/* EMPTY STATE */}
        {entries.length === 0 && (
          <div className="p-4 bg-white border rounded">No workouts yet.</div>
        )}

        {/* RECENT WORKOUTS LIST */}
        <div className="space-y-4">
          {entries.slice(0, 5).map((e) => (
            <div key={e.id} className="border p-3 rounded bg-white">
              <div className="flex justify-between mb-2">
                <div className="font-medium">{e.date}</div>
                <div className="text-xs text-gray-500">
                  {new Date(e.createdAt).toLocaleString()}
                </div>
              </div>

              <div className="space-y-2">
                {e.exercises.map((ex, i) => (
                  <div key={i} className="p-2 border rounded">
                    <div className="font-semibold">{ex.name}</div>

                    <div className="text-sm text-gray-600 mt-1">
                      {ex.sets.map((s, si) => (
                        <div key={si}>
                          Set {si + 1}: {s.reps || "-"} reps @{" "}
                          {s.weight || "-"} kg
                        </div>
                      ))}
                    </div>

                    {ex.notes && (
                      <div className="text-xs text-gray-500 mt-1">
                        Notes: {ex.notes}
                      </div>
                    )}
                  </div>
                ))}
              </div>
            </div>
          ))}
        </div>
      </div>

      {/* RIGHT SECTION ‚Äî Stats + Goals */}
      <div className="space-y-6">
        {/* STATS */}
        <Stats entries={entries} />

        {/* GOALS SECTION */}
        <GoalsSection goals={goals} onAddGoal={() => setAddingGoal(true)} />

        {/* GOAL MODAL */}
        {addingGoal && (
          <GoalModal
            user={user}
            onClose={() => {
              setAddingGoal(false);
              loadGoals(); // refresh goals
            }}
          />
        )}
      </div>
    </div>
  );
}
profiles.jsx import React, { useEffect, useState } from "react";
import { getWorkouts } from "../firebase/exercises";

export default function Profile({ user }) {
  const [stats, setStats] = useState({
    totalWorkouts: 0,
    totalVolume: 0,
    topExercises: [],
  });

  const [loading, setLoading] = useState(true);

  useEffect(() => {
    if (!user) return;

    async function loadProfile() {
      const workouts = await getWorkouts(user.uid);

      const totalWorkouts = workouts.length;
      let totalVolume = 0;
      const exerciseCount = {};

      workouts.forEach((w) => {
        w.exercises?.forEach((ex) => {
          // Count exercises
          exerciseCount[ex.name] = (exerciseCount[ex.name] || 0) + 1;

          // Calculate volume
          ex.sets?.forEach((s) => {
            const reps = Number(s.reps) || 0;
            const weight = Number(s.weight) || 0;
            totalVolume += reps * weight;
          });
        });
      });

      // Sort top exercises
      const topExercises = Object.entries(exerciseCount)
        .sort((a, b) => b[1] - a[1])
        .slice(0, 5)
        .map(([name, count]) => ({ name, count }));

      setStats({
        totalWorkouts,
        totalVolume,
        topExercises,
      });

      setLoading(false);
    }

    loadProfile();
  }, [user]);

  if (loading) return <p className="text-gray-600">Loading profile...</p>;

  return (
    <div className="p-8">
      <h2 className="text-3xl font-semibold mb-6">Your Profile</h2>

      {/* USER DETAILS CARD */}
      <div className="bg-white p-6 rounded-xl shadow-md mb-8">
        <h3 className="text-xl font-semibold mb-3">User Info</h3>
        <p className="text-gray-700"><strong>Name:</strong> {user.displayName || "User"}</p>
        <p className="text-gray-700"><strong>Email:</strong> {user.email}</p>
      </div>

      {/* STATS CARD */}
      <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10">
        <div className="bg-white p-6 rounded-xl shadow text-center">
          <p className="text-3xl font-bold text-blue-600">{stats.totalWorkouts}</p>
          <p className="text-gray-700 mt-2">Total Workouts</p>
        </div>

        <div className="bg-white p-6 rounded-xl shadow text-center">
          <p className="text-3xl font-bold text-green-600">{stats.totalVolume}</p>
          <p className="text-gray-700 mt-2">Total Volume Lifted</p>
        </div>

        <div className="bg-white p-6 rounded-xl shadow text-center">
          <p className="text-3xl font-bold text-purple-600">
            {stats.topExercises.length}
          </p>
          <p className="text-gray-700 mt-2">Top Exercises</p>
        </div>
      </div>

      {/* TOP EXERCISES LIST */}
      <div className="bg-white p-6 rounded-xl shadow">
        <h3 className="text-xl font-semibold mb-4">Most Frequently Performed Exercises</h3>

        {stats.topExercises.length === 0 ? (
          <p className="text-gray-600">No exercises logged yet.</p>
        ) : (
          <ul className="space-y-3">
            {stats.topExercises.map((ex, i) => (
              <li
                key={i}
                className="p-3 border rounded-lg flex justify-between items-center"
              >
                <span className="font-medium">{ex.name}</span>
                <span className="text-gray-600">{ex.count} times</span>
              </li>
            ))}
          </ul>
        )}
      </div>
    </div>
  );
}
prpage/jsx import React from "react";
import PRCharts from "../components/PRCharts";

export default function PRPage({ user }) {
  return (
    <div className="p-8 bg-gray-100 min-h-screen">
      <h2 className="text-3xl font-semibold mb-6">Personal Records</h2>
      <PRCharts user={user} />
    </div>
  );
}
templates.jsx import React, { useEffect, useState } from "react";
import { getTemplates, addTemplate, deleteTemplate } from "../firebase/templates";
import { defaultTemplates } from "../data/defaultTemplates";
import { useNavigate } from "react-router-dom";

export default function Templates({ user }) {
  const [templates, setTemplates] = useState([]);
  const [loading, setLoading] = useState(true);
  const navigate = useNavigate();

  async function load() {
    const saved = await getTemplates(user.uid);
    setTemplates([...defaultTemplates, ...saved]);
    setLoading(false);
  }

  useEffect(() => {
    if (user) load();
  }, [user]);

  function useTemplate(template) {
    navigate("/add", { state: { template } });
  }

  if (loading) return <p>Loading templates...</p>;

  return (
    <div className="p-8">
      <h2 className="text-3xl font-semibold mb-6">Workout Templates</h2>

      <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
        {templates.map((t, i) => (
          <div key={i} className="bg-white p-6 rounded-xl shadow">
            <h3 className="text-xl font-bold mb-2">{t.name}</h3>

            <ul className="list-disc ml-6 text-gray-700">
              {t.exercises.map((ex, idx) => (
                <li key={idx}>{ex.name}</li>
              ))}
            </ul>

            <div className="mt-4 flex gap-3">
              <button
                onClick={() => useTemplate(t)}
                className="px-4 py-2 bg-blue-600 text-white rounded"
              >
                Use Template
              </button>

              {t.id && (
                <button
                  onClick={async () => {
                    await deleteTemplate(user.uid, t.id);
                    load();
                  }}
                  className="px-3 py-2 bg-red-500 text-white rounded"
                >
                  Delete
                </button>
              )}
            </div>
          </div>
        ))}
      </div>
    </div>
  );
}
woukoutservise.js // workoutService.js
import { workoutsCollection } from './config'
import { 
  addDoc, 
  getDocs, 
  query, 
  orderBy, 
  doc, 
  updateDoc, 
  deleteDoc 
} from 'firebase/firestore'

// --------------------------
// ADD WORKOUT
// --------------------------
export async function addWorkout(userId, workoutData) {
  try {
    if (!userId) throw new Error("User ID missing")
    if (!workoutData) throw new Error("Workout data missing")

    const colRef = workoutsCollection(userId)

    const docRef = await addDoc(colRef, {
      ...workoutData,
      createdAt: new Date().toISOString()
    })

    return docRef.id
  } catch (err) {
    console.error("Error adding workout:", err)
    return null
  }
}

// --------------------------
// GET ALL WORKOUTS
// --------------------------
export async function getWorkouts(userId) {
  try {
    if (!userId) throw new Error("User ID missing")

    const colRef = workoutsCollection(userId)
    const q = query(colRef, orderBy("createdAt", "desc"))

    const snapshot = await getDocs(q)

    return snapshot.docs.map(doc => ({
      id: doc.id,
      ...doc.data()
    }))
  } catch (err) {
    console.error("Error fetching workouts:", err)
    return []
  }
}

// --------------------------
// UPDATE WORKOUT
// --------------------------
export async function updateWorkout(workoutId, userId, updatedData) {
  try {
    if (!workoutId) throw new Error("Workout ID missing")
    if (!userId) throw new Error("User ID missing")

    const docRef = doc(workoutsCollection(userId), workoutId)

    await updateDoc(docRef, {
      ...updatedData,
      updatedAt: new Date().toISOString()
    })

    return true
  } catch (err) {
    console.error("Error updating workout:", err)
    return false
  }
}

// --------------------------
// DELETE WORKOUT
// --------------------------
export async function deleteWorkout(userId, workoutId) {
  try {
    if (!userId) throw new Error("User ID missing")
    if (!workoutId) throw new Error("Workout ID missing")

    const docRef = doc(workoutsCollection(userId), workoutId)

    await deleteDoc(docRef)

    return true
  } catch (err) {
    console.error("Error deleting workout:", err)
    return false
  }
}
app.jsx import React, { useState, useEffect } from "react";
import { Routes, Route } from "react-router-dom";
import MainLayout from "./layouts/MainLayout";
import Home from "./pages/Home";
import History from "./pages/History";
import AnalyticsPage from "./pages/AnalyticsPage";
import AddWorkout from "./pages/AddWorkout";
import Profile from "./pages/Profile";
import { onAuthChange } from "./firebase/auth";
import Templates from "./pages/Templates";
import PRPage from "./pages/PRPage";
export default function App() {
  const [user, setUser] = useState(null);

  useEffect(() => {
    // Subscribe to auth changes
    const unsubscribe = onAuthChange((u) => setUser(u));
    return () => unsubscribe();
  }, []);

  return (
    <Routes>
      <Route
        path="/"
        element={
          <MainLayout user={user}>
            <Home user={user} />
          </MainLayout>
        }
      />

      <Route
        path="/history"
        element={
          <MainLayout user={user}>
            <History user={user} />
          </MainLayout>
        }
      />

      <Route
        path="/add"
        element={
          <MainLayout user={user}>
            <AddWorkout user={user} />
          </MainLayout>
        }
      />

      <Route
        path="/analytics"
        element={
          <MainLayout user={user}>
            <AnalyticsPage user={user} />
          </MainLayout>
        }
      />
      <Route
        path="/templates"
        element={
          <MainLayout user={user}>
            <Templates user={user} />
          </MainLayout>
        }
      />
<Route
  path="/pr"
  element={
    <MainLayout user={user}>
      <PRPage user={user} />
    </MainLayout>
  }
/>


      <Route
        path="/profile"
        element={
          <MainLayout user={user}>
            <Profile user={user} />
          </MainLayout>
        }
      />
    </Routes>
  );
}
   main.jsx import React from 'react'
import { createRoot } from 'react-dom/client'
import { BrowserRouter } from 'react-router-dom'
import App from './App'
import './index.css'

createRoot(document.getElementById('root')).render(
  <React.StrictMode>
    <BrowserRouter>
      <App /> {/* You can later pass user from auth context if needed */}
    </BrowserRouter>
  </React.StrictMode>
) 